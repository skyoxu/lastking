[
  {
    "id": "NG-0001",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [],
    "taskmaster_exported": false,
    "title": "Set up Godot 4.5.1 C# project for Windows",
    "description": "Initialize a Godot 4.5.1 project with C# scripting on Windows, ensuring compatibility with Steam single-player and required dependencies.",
    "status": "pending",
    "priority": "P1",
    "layer": "ci",
    "adr_refs": [
      "ADR-0011",
      "ADR-0001"
    ],
    "chapter_refs": [
      "CH07",
      "CH10",
      "CH01"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "ci"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #1 behavior matches PRD lock for Set up Godot 4.5.1 C# project for Windows.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "On Windows, Godot 4.5.1 .NET editor and the required .NET SDK are installed and recognized by the project.",
      "The project is configured to use C# as its scripting language, and at least one attached C# script compiles successfully in editor.",
      "Running the startup scene in Godot editor loads successfully and executes attached C# behavior without binding or runtime script errors.",
      "Project structure includes dedicated scenes, scripts, and assets directories, and each directory contains at least one relevant project artifact.",
      "A Windows Desktop export preset is configured and successfully produces a runnable Windows build artifact.",
      "The exported build can enter the game main flow in standalone single-player mode without requiring multiplayer backend services.",
      "Scene creation, node setup, and script attachment are verifiable in Godot editor via saved SceneTree and Inspector bindings.",
      "If editor startup, C# compile, scene loading, or Windows export verification fails, this task is not accepted as complete.",
      "A new project initialized in Godot 4.5.1 .NET on Windows generates C# solution/project files that compile without errors using the installed .NET SDK.",
      "A startup scene is configured as the main scene in project settings, saved, and reloads with its node-to-script attachments intact after editor restart.",
      "Acceptance evidence includes successful Windows verification of editor run, C# compile/execute, and basic startup scene loading with attached script behavior."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #1 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 1,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0002",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0001"
    ],
    "taskmaster_exported": false,
    "title": "Implement config-first balancing system",
    "description": "Create a configuration system to manage game balance values (e.g., wave budgets, day durations) without hardcoding.",
    "status": "pending",
    "priority": "P1",
    "layer": "core",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/Domain/GameConfigTests.cs"
    ],
    "acceptance": [
      "Taskmaster #2 behavior matches PRD lock for Implement config-first balancing system.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "Balance settings are loaded from a JSON or INI file through ConfigManager, and the loaded settings are globally accessible to gameplay systems.",
      "Day/Night timing comes from config with effective values Day=240 seconds and Night=120 seconds.",
      "Normal wave budget comes from config with day1=50 and daily growth=120% (multiplier 1.2).",
      "Spawn and boss controls come from config with spawn cadence=10 seconds and boss count=2.",
      "Elite and boss channel settings exist in config and are consumed by wave/spawn selection logic.",
      "When the config file is modified and reloaded, observable in-game balance behavior changes to the new values; if not modified, behavior remains unchanged.",
      "Verification checks confirm the above balance values are sourced from configuration reads rather than hardcoded constants in game logic.",
      "With no code changes, replacing only the balance config values and reloading updates runtime outcomes for day/night cycle length, wave budget progression, spawn cadence, and boss count.",
      "Required balance inputs are all provided by one configuration source and can be validated by reading loaded runtime values for day/night duration, normal wave day1 budget, normal wave daily growth, elite channel, boss channel, spawn cadence, and boss count."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #2 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 2,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0003",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0002"
    ],
    "taskmaster_exported": false,
    "title": "Develop runtime state machine for Day/Night cycles",
    "description": "Implement a state machine to manage Day and Night cycles with deterministic progression up to Day15.",
    "status": "pending",
    "priority": "P1",
    "layer": "core",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #3 behavior matches PRD lock for Develop runtime state machine for Day/Night cycles.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "A runtime state manager exposes exactly two active cycle states (Day, Night) and automatically alternates between them during normal play.",
      "Using configured cycle values, each Day phase lasts 4 minutes and each Night phase lasts 2 minutes before transitioning.",
      "Progression starts at Day1, advances in order, and reaches completion at Day15 without skipping or exceeding the day range.",
      "Given the same fixed seed and identical inputs, random event outcomes and state progression are reproducible across repeated runs.",
      "Completing Day15 triggers the win condition exactly once, and no win condition is triggered before Day15 completion.",
      "Cycle timing and state transitions advance through Godot runtime process-loop updates.",
      "Starting from Day1 at runtime start, after exactly 4 minutes the cycle transitions from Day to Night, and after exactly 2 additional minutes it transitions from Night to Day2.",
      "If runtime process-loop updates do not execute, elapsed cycle time, current state, and current day do not change.",
      "After Day15 completion and win trigger, further runtime updates do not increase the tracked day beyond 15 or trigger additional wins."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #3 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 3,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0004",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0002",
      "NG-0003"
    ],
    "taskmaster_exported": false,
    "title": "Implement wave budget and channel system",
    "description": "Set up wave generation with normal, elite, and boss channels based on configurable budgets.",
    "status": "pending",
    "priority": "P2",
    "layer": "core",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/Services/CollisionServiceTests.cs"
    ],
    "acceptance": [
      "Taskmaster #4 behavior matches PRD lock for Implement wave budget and channel system.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "A WaveManager C# component is available to generate wave outputs from day index, channel budget config, and seed input.",
      "Given default config (normal day1 budget = 50), the generated normal-channel budget for day 1 equals 50.",
      "For days beyond day 1, normal-channel budget follows the configured daily growth rule (default 120%) and matches expected values across multiple days.",
      "Changing elite-channel budget alone does not change normal-channel budget or normal-channel spawn output for the same day and seed.",
      "Changing boss-channel budget alone does not change normal-channel budget or normal-channel spawn output for the same day and seed.",
      "Enemy allocation per channel is constrained by that channel budget and does not exceed the configured budget.",
      "Using the same fixed seed, day, and config yields identical wave outputs across repeated runs; changing only the seed changes at least one spawn decision.",
      "Independent config tuning for normal, elite, and boss budgets changes only the targeted channel output while non-targeted channel outputs remain unchanged for the same day and seed."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #4 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 4,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0005",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0003",
      "NG-0004"
    ],
    "taskmaster_exported": false,
    "title": "Create enemy spawning system with cadence",
    "description": "Develop a spawning system that continuously spawns enemies during the first 80% of Night with a 10s cadence.",
    "status": "pending",
    "priority": "P2",
    "layer": "core",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/Services/CollisionServiceTests.cs"
    ],
    "acceptance": [
      "Taskmaster #5 behavior matches PRD lock for Create enemy spawning system with cadence.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "With Night duration configured to 120 seconds, new enemy spawn events are emitted only while Night elapsed time is less than 96 seconds.",
      "During the spawn-enabled Night window (0-96 seconds), consecutive regular enemy spawn events follow a 10-second cadence.",
      "During the final Night window (96-120 seconds), no new enemy spawn events are emitted.",
      "On boss nights, the system emits exactly 2 boss spawns as defined by configuration.",
      "All emitted spawns use predefined in-world spawn points, and no spawn is emitted outside that configured spawn-point set.",
      "Night cadence spawning is active only in Night state; outside Night state, no cadence-driven enemy spawn events are emitted.",
      "For a non-boss Night with at least one configured spawn point, at least one regular enemy spawn event is emitted before Night elapsed reaches 96 seconds.",
      "If Night duration is configured to D seconds, the spawn-enabled window is [0, 0.8D) and the no-new-spawn window is [0.8D, D]."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #5 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 5,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0006",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0001"
    ],
    "taskmaster_exported": false,
    "title": "Implement enemy AI with target priority and pathing",
    "description": "Develop enemy AI that follows target priority rules and handles blocked paths with fallback attacks.",
    "status": "pending",
    "priority": "P2",
    "layer": "core",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/Services/CollisionServiceTests.cs"
    ],
    "acceptance": [
      "Taskmaster #6 behavior matches PRD lock for Implement enemy AI with target priority and pathing.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "In mixed-target scenarios with at least one valid path, each enemy selects a target by strict reachable priority: unit > castle > armed defense > wall/gate.",
      "With identical initial state and fixed random seed, tie-breaks between equal-priority candidates produce the same target choice across repeated runs.",
      "If preferred targets are blocked, the enemy attacks the nearest blocking structure on the blocked route and does not remain idle or switch to unrelated non-blocking targets.",
      "Pathing behavior follows Godot navigation constraints: enemies traverse only navigable routes, and blocked-path scenarios prevent passage through obstacles.",
      "Enemy nodes used in combat scenes have EnemyAI attached and active; missing attachment is detected as a failed configuration in validation/tests.",
      "Player-origin attacks cannot damage friendly/player units, and friendly-fire hit events are absent in collision-layer/mask validation runs.",
      "Whenever at least one higher-priority target has a valid navigation path, the enemy does not select any lower-priority target in that decision cycle.",
      "In blocked-path tests, fallback target selection is validated as the nearest blocking structure on the blocked route by distance, and attack events are directed to that blocker.",
      "In player-attack combat runs, friendly/player damage event count remains zero from start to end, confirming friendly fire stays disabled."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #6 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 6,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0007",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0001",
      "NG-0006"
    ],
    "taskmaster_exported": false,
    "title": "Set up castle HP and loss condition",
    "description": "Implement castle health system and loss condition when HP reaches 0.",
    "status": "pending",
    "priority": "P2",
    "layer": "ci",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "ci"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #7 behavior matches PRD lock for Set up castle HP and loss condition.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "At battle start, castle HP is initialized from the configured starting HP value and is greater than 0.",
      "When an enemy attack event is applied to the castle, castle HP decreases by the expected damage amount for that attack.",
      "If no enemy attack is applied to the castle during a test interval, castle HP does not change during that interval.",
      "When castle HP reaches 0 due to enemy damage, the game enters the loss/game-over state.",
      "After the loss/game-over state is entered at castle HP = 0, the game state remains in loss/game-over and does not continue normal play.",
      "The gameplay UI shows the current castle HP and updates the displayed value after each HP change.",
      "Enemy AI can target the castle as a valid target, and attacks from that targeting flow reduce castle HP.",
      "The loss condition is triggered exactly when castle HP reaches 0; while castle HP remains above 0, the game does not enter loss/game-over.",
      "Across a sequence of enemy attacks in one battle, castle HP changes cumulatively per resolved damage event, and the UI HP value equals the current castle HP after each event."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #7 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 7,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0008",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0003",
      "NG-0007"
    ],
    "taskmaster_exported": false,
    "title": "Develop win condition and game progression",
    "description": "Implement win condition (survive Day15) and integrate with day progression.",
    "status": "pending",
    "priority": "P3",
    "layer": "core",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #8 behavior matches PRD lock for Develop win condition and game progression.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "Reaching Day15 with castle HP greater than 0 triggers a win end state and displays a win screen or win message.",
      "If castle HP becomes 0 before Day15, a loss end state is triggered and no win state is emitted for that run.",
      "Before an end state is triggered, day/night progression continues normally and still evaluates the Day15 win condition.",
      "After either win or loss is triggered, game-end handling is applied as configured (pause or reset), preventing continued normal progression without explicit restart/reset.",
      "When current day is below 15 and castle HP is above 0, the game remains in non-win progression state.",
      "At the progression step where current day first reaches 15 and castle HP is greater than 0, win state is entered immediately in that same run.",
      "If castle HP is 0 at or before the Day15 evaluation point, the run remains in loss state and must not transition to win unless an explicit restart/reset starts a new run.",
      "After entering win or loss, additional day/night ticks must not produce extra end-state transitions or duplicate win/loss UI emissions in the same run."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #8 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 8,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0009",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0001",
      "NG-0003",
      "NG-0007"
    ],
    "taskmaster_exported": false,
    "title": "Create basic UI for day/night and HP display",
    "description": "Implement a minimal user interface to show current day, time in cycle, and castle HP.",
    "status": "pending",
    "priority": "P3",
    "layer": "adapter",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "adapter"
    ],
    "test_refs": [
      "Tests.Godot/tests/UI/test_hud_scene.gd"
    ],
    "acceptance": [
      "Taskmaster #9 behavior matches PRD lock for Create basic UI for day/night and HP display.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "At runtime, the screen contains distinct UI outputs for current day, current cycle time remaining, and castle HP.",
      "While the simulation advances, the displayed day value reflects the game day counter within the expected 1-15 range.",
      "The displayed time remaining for the active Day/Night cycle changes over time during play and is not static while the cycle is progressing.",
      "When a Day/Night phase transition occurs, the cycle-related UI updates to the new phase/timing state without showing stale previous-phase values.",
      "When castle HP changes from gameplay events, the HP UI value updates accordingly during runtime.",
      "If day, cycle time, and HP source values do not change, their corresponding UI outputs remain unchanged.",
      "On scene initialization, day, cycle time remaining, and castle HP UI outputs are populated with concrete runtime values (not empty placeholders) before progression-dependent changes occur.",
      "Within a single play session that includes at least one day/night transition and at least one HP change event, all three UI outputs continue updating and remain visible without freezing or disappearing.",
      "During normal core-loop gameplay, current day, cycle time remaining, and castle HP are continuously readable on the main play view without requiring a secondary debug/menu screen."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #9 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 9,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0010",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0001",
      "NG-0002",
      "NG-0003",
      "NG-0004",
      "NG-0005",
      "NG-0006",
      "NG-0007",
      "NG-0008",
      "NG-0009"
    ],
    "taskmaster_exported": false,
    "title": "Integrate and test full core loop",
    "description": "Combine all systems and test the complete core gameplay loop from start to win/loss.",
    "status": "pending",
    "priority": "P1",
    "layer": "core",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #10 behavior matches PRD lock for Integrate and test full core loop.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "A single playable scene integrates runtime loop services through adapters with explicit deterministic update order, and smoke run evidence shows day-night transition, wave start, and win/loss terminal dispatch.",
      "Deterministic checkpoints are emitted at each major transition, and two same-seed replays for Day1-Day15 produce an identical ordered checkpoint timeline; any sequence mismatch fails acceptance.",
      "In fully blocked seeded map fixtures, path-block fallback targeting engages without deadlock and recovers to normal targeting when a valid path becomes available.",
      "Normal, elite, and boss-night scenarios enforce fixed boss-count lock and per-channel accounting isolation, with no cross-channel budget leakage.",
      "Each integration slice is independently runnable and publishes consolidated evidence artifacts to logs/e2e and logs/ci, including required core-anchor fields for CI inspection and manual debugging handoff.",
      "Staged integration execution runs slices in the required order (runtime loop wiring, seeded checkpoints, blocked-map fallback, boss/channel checks, evidence packaging), and each slice produces an explicit pass/fail result when run independently.",
      "A full seeded end-to-end replay from Day1 through Day15 reaches either win or loss and records deterministic timeline, channel isolation, blocker fallback engagement, and boss-count lock anchors in logs/e2e and logs/ci; missing terminal state or missing anchors fails acceptance."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #10 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 10,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0011",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [],
    "taskmaster_exported": false,
    "title": "Set Up Godot 4.5.1 C# Project for Windows",
    "description": "Initialize a Godot 4.5.1 project with C# support on Windows, ensuring compatibility with Steam single-player and setting up the basic project structure.",
    "status": "pending",
    "priority": "P1",
    "layer": "ci",
    "adr_refs": [
      "ADR-0011",
      "ADR-0001"
    ],
    "chapter_refs": [
      "CH07",
      "CH10",
      "CH01"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "ci"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #11 behavior matches PRD lock for Set Up Godot 4.5.1 C# Project for Windows.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "On Windows, the project opens in Godot 4.5.1 with .NET/C# support enabled and no editor startup errors.",
      "Building C# scripts from the Godot editor completes with zero C# compilation errors.",
      "A main scene is configured as the startup scene, and running the project opens that scene without runtime exceptions.",
      "The baseline project structure includes directories for scripts, scenes, assets, and config files.",
      "Startup game flow is implemented through Godot C# API and is executed when the main scene runs.",
      "Configuration logic loads at least one JSON balancing/config file through C# at runtime without parse or load errors.",
      "A Windows desktop export preset for Steam single-player compatibility is configured in project export settings.",
      "Exporting with the Windows preset produces a runnable Windows executable artifact.",
      "Launching the exported executable on Windows opens the game and reaches the initial scene without immediate crash.",
      "If any required open/compile/run/export/launch check fails, the task is not accepted."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #11 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 11,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0012",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0011"
    ],
    "taskmaster_exported": false,
    "title": "Implement Core Resource System with Integer Safety",
    "description": "Create a resource management system for gold, iron, and population cap, ensuring integer-safe operations to prevent floating-point drift.",
    "status": "pending",
    "priority": "P1",
    "layer": "core",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #12 behavior matches PRD lock for Implement Core Resource System with Integer Safety.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "ResourceManager tracks gold, iron, and population cap as integer state and initializes to gold=800, iron=150, pop-cap=50.",
      "A spend operation succeeds only when available gold and iron are each greater than or equal to requested integer costs, and on success subtracts exactly those costs.",
      "If any requested spend or subtraction would make a tracked resource negative, the operation is refused and all resource values remain unchanged.",
      "Zero-cost and zero-change operations produce deterministic results and do not corrupt resource state.",
      "Negative input attempts for spend/add/subtract are explicitly rejected or treated as no-op by contract, with unchanged state when rejected.",
      "Resource arithmetic prevents integer overflow/underflow (no wraparound into invalid values) during add/subtract/spend operations.",
      "Resource state changes emit a Godot signal or equivalent event carrying updated values so UI can refresh from the new state.",
      "Resource calculations for this system use integer semantics only and do not rely on floating-point math for gold, iron, or population cap.",
      "Valid add/subtract operations for gold, iron, and population cap apply exact integer deltas, and the resulting values are observable in state reads and emitted update payloads.",
      "When a mutation request is refused due to insufficient resources, negative amount, or overflow/underflow risk, all tracked resource values remain unchanged after the request."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #12 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 12,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0013",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0011",
      "NG-0012"
    ],
    "taskmaster_exported": false,
    "title": "Design and Implement Building System with Footprint Rules",
    "description": "Develop a building system that supports core buildings (castle, residence, mine, barracks, MG tower, wall, mine trap) with footprint rules and placement logic.",
    "status": "pending",
    "priority": "P1",
    "layer": "core",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Tests.Godot/tests/UI/test_hud_scene.gd"
    ],
    "acceptance": [
      "Taskmaster #13 behavior matches PRD lock for Design and Implement Building System with Footprint Rules.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "Building definitions cover castle, residence, mine, barracks, MG tower, wall, and mine trap, and each exposes type, level, footprint size, HP, and cost used by placement and build-cost checks.",
      "Footprint rule values are enforced for placement: castle=4, barracks=2, MG tower=1, wall=1.",
      "A build request is accepted only when the target grid area fits the footprint and all required cells are free.",
      "If placement is out of bounds or collides with occupied cells, the request is rejected, no building is created, and resources remain unchanged.",
      "If resources are insufficient for the selected building cost, the request is rejected, no building is created, and resources remain unchanged.",
      "When a build request succeeds, resources are deducted exactly once and the occupied grid cells match the building footprint.",
      "Wall drag-line mode places contiguous wall segments along the dragged grid path; invalid cells on the path do not create segments and do not consume resources.",
      "Gate one-way logic is enforced: wall lines block traversal except at gate cells, and gates permit traversal only in the configured direction.",
      "Automated validation covers valid/invalid placement positions, footprint collision cases, build-cost deduction, wall drag-line behavior, and gate functionality on the Windows Godot+C# baseline.",
      "Placement validation and occupancy tracking operate on discrete grid coordinates (TileMap or equivalent custom grid), and accepted placements do not produce off-grid occupancy.",
      "For each supported building type (castle, residence, mine, barracks, MG tower, wall, mine trap), placement and cost checks use that selected typeâ€™s configured footprint and cost values."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #13 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 13,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0014",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0012",
      "NG-0013"
    ],
    "taskmaster_exported": false,
    "title": "Implement Economy and Tax System for Residences",
    "description": "Add economy features where residences generate gold tax every 15 seconds and provide population capacity.",
    "status": "pending",
    "priority": "P2",
    "layer": "core",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #14 behavior matches PRD lock for Implement Economy and Tax System for Residences.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "On successful Residence placement, population cap increases by the configured population-cap value exactly once.",
      "After a Residence is built, ResourceManager gold increases by the configured tax amount at 15-second intervals, and no Residence tax gold is added before the first 15-second tick.",
      "Residence tax per tick is sourced from configuration (including level-based values when configured), so configuration changes are reflected in awarded gold.",
      "Residence-driven gold and population-cap updates remain integer-safe over repeated ticks, with no fractional accumulation or floating-point drift in stored totals.",
      "If no Residence is built, Residence tax processing does not change gold.",
      "Verification includes unit coverage for 15-second tax cadence and gold addition, plus in-game validation that placement raises population cap and gold increments every 15 seconds on Windows Godot+C#.",
      "Failed or canceled Residence placement leaves both population cap and gold unchanged, and does not start Residence tax cadence.",
      "When multiple Residences are built, total gold added at each 15-second tick equals the sum of configured tax amounts for all eligible Residences."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #14 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 14,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0015",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0013",
      "NG-0014"
    ],
    "taskmaster_exported": false,
    "title": "Develop Upgrade and Repair System with Constraints",
    "description": "Create a system for building upgrades (max level 5, no skipping) and repairs, with economic rules and constraints.",
    "status": "pending",
    "priority": "P2",
    "layer": "core",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #15 behavior matches PRD lock for Develop Upgrade and Repair System with Constraints.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "Upgrade start is allowed only when state is Idle, level is below 5, and config-defined upgrade resource costs are payable.",
      "A successful upgrade increases level by exactly 1; level skipping is not possible, and level never exceeds 5.",
      "If an upgrade request is invalid (non-Idle state, insufficient resources, or level already 5), upgrade does not start and level/state remain unchanged.",
      "When an upgrade completes, current HP is restored to full HP.",
      "Changing upgrade cost values in configuration changes charged upgrade costs accordingly for subsequent upgrades.",
      "Repair consumes gold only; fully repairing from damaged to full HP results in total gold spend equal to 50% of the building build cost.",
      "Repair is applied incrementally over time (not as a single instant heal) until full HP is reached.",
      "Upgrade and repair cannot be active simultaneously; starting one while the other is active must not create concurrent Upgrading and Repairing activity.",
      "Progress operations return to Idle state on completion, and automated tests verify level progression, cost rules, HP restoration, conflict handling, integer-safe arithmetic, and config-driven values on Windows Godot+C# baseline.",
      "Upgrade and repair effects are completed asynchronously via progress flow (queue/coroutine/timer driven), so completion outcomes are observed after progress updates rather than in the same tick as a successful start request."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #15 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 15,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0016",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0013",
      "NG-0014"
    ],
    "taskmaster_exported": false,
    "title": "Implement Unit Training Queue in Barracks",
    "description": "Add unit training functionality to barracks with a single queue per barracks, cancellable with 100% refund.",
    "status": "pending",
    "priority": "P2",
    "layer": "core",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #16 behavior matches PRD lock for Implement Unit Training Queue in Barracks.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "Each Barracks instance owns exactly one training queue, and enqueue/cancel operations on one Barracks do not change any other Barracks queue state.",
      "Starting unit training deducts that unit's configured cost, and if resources are insufficient the request is rejected with queue state and resource totals unchanged.",
      "Queued training jobs are processed in FIFO order using config-driven training durations, and completion removes exactly one finished job and produces exactly one trained unit result.",
      "Canceling a queued job at a valid index removes only that job and refunds 100% of that job's deducted resources, while preserving the relative order of remaining jobs.",
      "Canceling with an invalid index is rejected and leaves queue contents and resource totals unchanged.",
      "Godot signals are emitted on queue enqueue, cancel, and completion so UI can update from emitted state changes.",
      "Resource arithmetic for training and cancel flows remains integer-safe, with no overflow/underflow and no negative resource totals.",
      "Canceling the currently active head training job is supported: that job is removed, exactly 100% of its deducted resources is refunded, no unit is produced for the canceled job, and remaining jobs keep order.",
      "Training completion is time-driven: before the configured duration elapses, no queued job completes and no completion result is emitted."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #16 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 16,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0017",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0013",
      "NG-0016"
    ],
    "taskmaster_exported": false,
    "title": "Design and Integrate Tech Tree for Unit Stats",
    "description": "Develop a config-driven tech tree that affects unit stats (atk speed %, damage, production speed %, range, HP, cost %).",
    "status": "pending",
    "priority": "P2",
    "layer": "core",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #17 behavior matches PRD lock for Design and Integrate Tech Tree for Unit Stats.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "Tech tree node definitions and unlock requirements are read from a JSON config loaded through Godot's resource system, and the runtime node set matches the config data.",
      "Stat effects from unlocked tech nodes are combined multiplicatively (not additively) for attack speed, damage, production speed, range, HP, and cost.",
      "When no relevant tech is unlocked, the multiplier for that stat remains 1.0 and barracks-trained units retain baseline stat values.",
      "After unlocking configured tech nodes, newly trained barracks units show stat changes that match the computed config multipliers.",
      "Unlock progression is fully config-driven: changing unlock paths/prerequisites in config changes available unlocks without code changes.",
      "Automated tests include JSON config loading/parsing checks that assert runtime tech node IDs, unlock prerequisites, and stat modifier values match the JSON resource content.",
      "Unit tests verify stat multiplier calculations use multiplicative stacking across multiple unlocked nodes (for example, 1.1 Ã— 1.2 = 1.32) and ignore locked nodes.",
      "In-game verification unlocks configured techs, trains barracks units, and confirms attack speed, damage, production speed, range, HP, and cost equal baseline values multiplied by configured tech multipliers.",
      "If unlock prerequisites are not satisfied by the current config state, the corresponding tech remains unavailable and stat outputs remain unchanged from currently applicable multipliers."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #17 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 17,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0018",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0012",
      "NG-0014"
    ],
    "taskmaster_exported": false,
    "title": "Implement Reward System with Nightly Choices",
    "description": "Add a reward system that triggers each night, offering 3 choices from separate pools, with fallback to gold if pool is exhausted.",
    "status": "pending",
    "priority": "P3",
    "layer": "core",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #18 behavior matches PRD lock for Implement Reward System with Nightly Choices.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "When the day/night cycle enters a night phase, one reward trigger occurs for that night and reward generation runs for that night type.",
      "Given a night type with at least three available entries in its configured pool, the system presents exactly three reward choices from that pool.",
      "Reward pools are loaded from JSON configuration by night type, and changing the JSON changes generated choices without code changes.",
      "Each generated choice is a supported reward kind (resource, unit, or bonus) and is visible in the Godot UI for night reward selection.",
      "If the current night-type pool is exhausted and generates zero choices, the system grants the configured fixed gold fallback amount exactly once for that trigger and does not present selectable reward choices for that trigger.",
      "Automated coverage includes choice generation, pool exhaustion, fallback-to-gold behavior, and JSON-driven pool selection; in-game night progression verifies reward presentation and fallback behavior.",
      "Reward processing does not trigger during non-night phases, and no reward-choice UI or fallback gold is produced outside a night trigger.",
      "For any night trigger where generated choices count is greater than zero, fallback gold is not granted for that trigger.",
      "Across consecutive nights with different night types, each trigger uses the active night type pool, and presented choices correspond to that active night type."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #18 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 18,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0019",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0011",
      "NG-0013"
    ],
    "taskmaster_exported": false,
    "title": "Add Day/Night Cycle and Game Win/Lose Conditions",
    "description": "Implement the day/night cycle (4 min Day + 2 min Night, Day1-Day15) and win/lose conditions based on castle HP.",
    "status": "pending",
    "priority": "P1",
    "layer": "core",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #19 behavior matches PRD lock for Add Day/Night Cycle and Game Win/Lose Conditions.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "A gameplay cycle runs 4 minutes of Day then 2 minutes of Night, repeating in that order for each day without skipped or reordered phases.",
      "Game state tracks current day and cycle progress, and day numbering advances sequentially from Day1 to Day15 after each full Day+Night cycle.",
      "When castle HP reaches 0 at any point, the run transitions to a Lose state immediately and does not later transition to Win.",
      "When the player survives through Day15 with castle HP above 0, the run transitions to a Win state and does not later transition to Lose.",
      "Win/Lose checks read castle HP from the building/castle system source of truth, not from UI-only values.",
      "Godot signals are emitted for UI-observable state updates, including at least day counter changes on day progression.",
      "End-to-end validation covers both terminal paths: forced castle destruction triggers Lose, and surviving to Day15 triggers Win.",
      "Configured timing yields approximately 90 minutes for 15 full days (15 x (4 + 2) minutes), satisfying the stated 60-90 minute match-duration target boundary.",
      "Runtime-observable state includes current phase plus elapsed or remaining phase time, so tests/UI can verify day-night progress without relying on internal fields.",
      "A complete win-path sequence is observable as Day1->Night1 through Day15->Night15 before terminal Win, and no Day16 phase begins.",
      "After entering either terminal state (Win or Lose), phase transitions stop and no further day progression updates are emitted."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #19 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 19,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0020",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0013",
      "NG-0016",
      "NG-0017"
    ],
    "taskmaster_exported": false,
    "title": "Integrate Combat with Friendly Fire Disabled",
    "description": "Implement combat system for units and towers, with friendly fire disabled for all player attacks.",
    "status": "pending",
    "priority": "P2",
    "layer": "core",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #20 behavior matches PRD lock for Integrate Combat with Friendly Fire Disabled.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "If attacker and target share the same team/owner, the attack is refused and target HP remains unchanged.",
      "Player-owned units can damage enemy units or enemy buildings when a valid target is in attack range.",
      "MG towers can acquire and damage enemy targets, and never damage same-team units or same-team walls.",
      "Attack damage uses current config/tech-tree-derived stats for the attacker, and stat changes produce corresponding damage changes.",
      "Automated verification includes unit tests for attack resolution and friendly-fire prevention plus an in-game scenario covering player units, enemies, MG towers, and walls where only enemies are hit.",
      "CombatSystem provides a shared attack-resolution path for both unit and MG tower attacks, and both paths enforce the same team/owner friendly-fire block before any damage is applied.",
      "Target acquisition uses in-range detection (physics query or area overlap), so attacks execute only against detected enemy targets in range, while non-detected or out-of-range targets receive no damage."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #20 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 20,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0021",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [],
    "taskmaster_exported": false,
    "title": "Set Up Godot 4.5.1 C# Project with Windows Configuration",
    "description": "Initialize a Godot 4.5.1 project with C# scripting, configure for Windows-only Steam single-player, and establish project structure.",
    "status": "pending",
    "priority": "P1",
    "layer": "ci",
    "adr_refs": [
      "ADR-0011",
      "ADR-0001"
    ],
    "chapter_refs": [
      "CH07",
      "CH10",
      "CH01"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "ci"
    ],
    "test_refs": [
      "Game.Core.Tests/Domain/GameConfigTests.cs"
    ],
    "acceptance": [
      "Taskmaster #21 behavior matches PRD lock for Set Up Godot 4.5.1 C# Project with Windows Configuration.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "Project opens in Godot 4.5.1 with C# scripting enabled and C# project files generated without initialization errors.",
      "Project settings set application/config/name to \"LASTKING\" and application/run/main_scene to \"res://scenes/Main.tscn\".",
      "Project settings set display/window/size/width to 1920 and display/window/size/height to 1080.",
      "Export presets include Windows Desktop (64-bit) and a Steam App ID placeholder for single-player configuration.",
      "Non-Windows export targets are disabled or absent; enabling other platform targets fails acceptance.",
      "Required project folders exist for scripts, scenes, configs, saves, and game assets organization (including assets, ui, and audio paths).",
      "Main scene at res://scenes/Main.tscn runs on Windows without startup errors and emits console output containing \"Project setup complete\" from an attached C# script.",
      ".NET SDK/toolchain configured for the project is compatible with Godot 4.5.1 C# and supports successful build/run."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #21 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 21,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0022",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0021"
    ],
    "taskmaster_exported": false,
    "title": "Implement Camera and Interaction System with Edge and Keyboard Scrolling",
    "description": "Develop camera controls for edge scrolling and keyboard-based scrolling in the game world.",
    "status": "pending",
    "priority": "P1",
    "layer": "adapter",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "adapter"
    ],
    "test_refs": [
      "Tests.Godot/tests/UI/test_hud_scene.gd"
    ],
    "acceptance": [
      "Taskmaster #22 behavior matches PRD lock for Implement Camera and Interaction System with Edge and Keyboard Scrolling.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "When the mouse cursor enters a configurable edge margin near each viewport border, the camera moves in the corresponding world direction; when the cursor is outside all edge margins and no scroll keys are pressed, camera position does not change.",
      "Pressing scroll actions mapped to Arrow keys and WASD moves the camera in the expected cardinal directions, and releasing those keys stops keyboard-driven scrolling.",
      "Camera translation is smooth and frame-rate independent, with movement scaled by delta time and a configurable scroll speed value that can be adjusted without code changes.",
      "Camera movement is clamped to configured world boundaries so the visible area cannot be scrolled beyond map limits on any side.",
      "Edge scrolling and keyboard scrolling can both be active in the same frame without input loss, and resulting movement remains continuous.",
      "A CameraController with an active Camera2D is present in the playable scene, and camera movement is applied through that camera.",
      "With default configuration, entering within 20 pixels of any viewport edge triggers movement toward that edge, and scroll input is consumed through Godot Input/viewport events."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #22 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 22,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0023",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0021"
    ],
    "taskmaster_exported": false,
    "title": "Develop Runtime Speed Controls (Pause, 1x, 2x) with Timer Freeze",
    "description": "Implement game speed controls including pause, 1x, and 2x speeds, ensuring all timers freeze during pause.",
    "status": "pending",
    "priority": "P1",
    "layer": "core",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #23 behavior matches PRD lock for Develop Runtime Speed Controls (Pause, 1x, 2x) with Timer Freeze.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "Pause control sets runtime speed to 0 immediately, and gameplay progression halts while paused.",
      "1x control sets runtime speed to 1x, and gameplay progression resumes at baseline speed.",
      "2x control sets runtime speed to 2x, and gameplay progression is measurably faster than at 1x over the same interval.",
      "When paused, active and queued countdown timers (including wave timers) stop decrementing and do not complete early.",
      "After unpausing, paused countdown timers resume from their remaining time rather than restarting or skipping elapsed steps.",
      "UI speed controls expose Pause, 1x, and 2x, and each control updates active speed state and applies the matching runtime behavior.",
      "Nodes intended to pause with gameplay stop processing during pause and resume processing when gameplay is unpaused.",
      "Selecting 1x or 2x while currently paused clears paused state in the same interaction and applies the selected runtime speed immediately.",
      "During pause, countdown logic driven by custom timers remains frozen even if real time passes, and those timers continue from the exact remaining value after unpause.",
      "Pause, 1x, and 2x controls are mutually consistent: at any moment only one active speed state is in effect, and observed gameplay rate matches that active state."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #23 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 23,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0024",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0021"
    ],
    "taskmaster_exported": false,
    "title": "Create UI Feedback System for Invalid Actions and Errors",
    "description": "Implement UI feedback for invalid placement, blocked actions, and migration/load errors with clear user-facing messages.",
    "status": "pending",
    "priority": "P2",
    "layer": "adapter",
    "adr_refs": [
      "ADR-0021",
      "ADR-0022",
      "ADR-0018"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH04",
      "CH01",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "adapter"
    ],
    "test_refs": [
      "Tests.Godot/tests/UI/test_hud_scene.gd"
    ],
    "acceptance": [
      "Taskmaster #24 behavior matches PRD lock for Create UI Feedback System for Invalid Actions and Errors.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "When invalid placement is attempted (such as blocked or invalid terrain), the UI shows a temporary feedback message (for example, \"Cannot build here.\") and the message auto-hides after a short timeout.",
      "When a blocked action is attempted, the UI feedback includes the specific blocking reason, and the blocked action is refused without changing game state.",
      "When migration or load fails (including corrupted save input), a persistent error dialog is shown with error details and remains visible until the user dismisses it.",
      "Feedback messages are non-intrusive: temporary feedback does not block normal gameplay interaction while visible.",
      "Feedback display is event-driven: invalid placement, blocked action, and migration/load error events each trigger their corresponding UI feedback output.",
      "On an invalid placement attempt, placement is refused and no new entity is committed to game state while the temporary feedback is shown.",
      "The migration/load error dialog is dismissible only by explicit user action and does not auto-hide.",
      "For blocked actions and migration/load failures, the displayed message content reflects the concrete triggering reason/details rather than a generic placeholder."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #24 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 24,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0025",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0021"
    ],
    "taskmaster_exported": false,
    "title": "Build Save System with Autosave and Migration Handling",
    "description": "Develop a save system with one autosave slot, start-of-day autosaves, and migration for invalid configs/loads.",
    "status": "pending",
    "priority": "P1",
    "layer": "adapter",
    "adr_refs": [
      "ADR-0006",
      "ADR-0008",
      "ADR-0011"
    ],
    "chapter_refs": [
      "CH05",
      "CH10",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "adapter"
    ],
    "test_refs": [
      "Tests.Godot/tests/Integration/test_backup_restore_savegame.gd"
    ],
    "acceptance": [
      "Taskmaster #25 behavior matches PRD lock for Build Save System with Autosave and Migration Handling.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "Saving uses exactly one autosave slot, and consecutive autosaves overwrite the same slot instead of creating additional save files.",
      "At the start of each in-game day, an autosave is triggered and the autosave file is created or updated in user storage on Windows.",
      "Loading a valid autosave restores persisted gameplay state values, including game state, seed, and wave timer, to the saved values.",
      "When save version is incompatible with the current version, load is rejected, a user-visible migration error is shown, and runtime state remains unchanged.",
      "When save content is invalid or corrupt, load fails with explicit error feedback and does not crash or partially apply state.",
      "Save/load file access uses Windows-safe user-path semantics and handles missing file and read/write failures with deterministic, testable outcomes.",
      "Across multiple in-game day starts, each day-start event triggers one autosave write to the same autosave path, and no additional save-slot files are created.",
      "A save/load round trip reproduces the saved values for game state, seed, and wave timer exactly at the moment of save.",
      "If no autosave file exists, load returns a deterministic failure outcome with explicit feedback and leaves runtime state unchanged."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #25 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 25,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0026",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0025"
    ],
    "taskmaster_exported": false,
    "title": "Integrate Steam Cloud Save with Account Binding",
    "description": "Implement Steam cloud save functionality using Steam account binding for save data synchronization.",
    "status": "pending",
    "priority": "P2",
    "layer": "adapter",
    "adr_refs": [
      "ADR-0006",
      "ADR-0008",
      "ADR-0011"
    ],
    "chapter_refs": [
      "CH05",
      "CH10",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "adapter"
    ],
    "test_refs": [
      "Tests.Godot/tests/Integration/test_backup_restore_savegame.gd"
    ],
    "acceptance": [
      "Taskmaster #26 behavior matches PRD lock for Integrate Steam Cloud Save with Account Binding.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "When a Steam development account is logged in, triggering save through the existing SaveManager uploads the active save file to Steam Cloud and reports a successful upload result.",
      "After a successful cloud upload, restarting the game and loading the same profile restores save data from Steam Cloud, and the loaded data matches the previously uploaded save content.",
      "If local and cloud save versions conflict, the game blocks automatic overwrite and shows a user choice prompt before deciding which version to load.",
      "If upload or download fails due to network/API/unavailable cloud conditions, the failure is surfaced to the user and the pre-existing local save file remains unchanged.",
      "Save data is bound to the current Steam account identity, and cloud operations only read/write that account's cloud save scope.",
      "Steam Cloud integration remains compatible with the current SaveManager workflow, and local save/load continues to work when Steam Cloud is unavailable.",
      "In a Steam development environment, downloading cloud save data to a clean local target after upload restores the same profile state with no missing persisted fields.",
      "When a local-vs-cloud conflict prompt is shown, choosing the local option loads local data for that operation without automatic cloud overwrite, and choosing the cloud option loads cloud data for that operation.",
      "When no valid Steam login is present, cloud sync is explicitly skipped with user-visible status, and SaveManager local save/load still completes successfully without save corruption."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #26 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 26,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0027",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0021"
    ],
    "taskmaster_exported": false,
    "title": "Implement Achievements System with Deterministic Unlocking",
    "description": "Create an achievements system with a visible list, non-hidden achievements, and deterministic unlock triggers.",
    "status": "pending",
    "priority": "P2",
    "layer": "adapter",
    "adr_refs": [
      "ADR-0006",
      "ADR-0008",
      "ADR-0011"
    ],
    "chapter_refs": [
      "CH05",
      "CH10",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "adapter"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #27 behavior matches PRD lock for Implement Achievements System with Deterministic Unlocking.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "Achievement definitions are loaded from configuration at startup, and each definition includes an ID, name, description, and unlock condition.",
      "All configured achievements are available as non-hidden entries before any unlock event occurs.",
      "Given the same ordered game-event sequence across repeated runs, the same achievement IDs unlock at the same trigger points, and no extra achievements unlock.",
      "Attempting to unlock an already unlocked achievement does not create duplicate unlock state changes, duplicate notifications, or duplicate persistence writes.",
      "If Steamworks integration is enabled, unlocking a valid achievement updates Steam achievement state and persists stats; if disabled, local unlock state and UI flow still complete without external API dependency.",
      "After configuration load, every configured achievement ID has a tracked state initialized to locked until its unlock condition is satisfied.",
      "Events or unlock requests that do not match a valid, currently locked achievement leave unlock state unchanged and do not emit notification or external sync calls."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #27 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 27,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0028",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0021"
    ],
    "taskmaster_exported": false,
    "title": "Set Up Localization (i18n) for zh-CN and en-US",
    "description": "Implement key-based internationalization workflow supporting zh-CN and en-US at launch.",
    "status": "pending",
    "priority": "P2",
    "layer": "ci",
    "adr_refs": [
      "ADR-0006",
      "ADR-0008",
      "ADR-0011"
    ],
    "chapter_refs": [
      "CH05",
      "CH10",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "ci"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #28 behavior matches PRD lock for Set Up Localization (i18n) for zh-CN and en-US.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "Localization supports both en-US and zh-CN: selecting either language loads that locale's translations and resolves the same key (for example UI_PAUSE) to locale-specific text.",
      "Language switching is available in settings, and changing language updates already-visible localized UI text in the same running session.",
      "When a key is missing in the active locale, the rendered text falls back to the key string itself (for example, MISSING_KEY renders as \"MISSING_KEY\").",
      "Language preference is persisted to config: after setting zh-CN or en-US and restarting the game, the previously selected language is restored automatically.",
      "At launch, only en-US and zh-CN are accepted locale options; requesting an unsupported locale does not change the current language state.",
      "Localization key identifiers used by UI remain stable across patches: existing keys referenced by UI are not renamed or removed unintentionally.",
      "The locale resource for each supported language (en-US and zh-CN) is present and parseable at runtime; if loading/parsing fails, the switch is refused and the previously active language state remains unchanged.",
      "Localized UI text is key-driven (not hardcoded): for representative visible UI entries, the displayed value changes by locale through the same key lookup path in a single running session."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #28 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 28,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0029",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0021"
    ],
    "taskmaster_exported": false,
    "title": "Add Audio Settings for Music and SFX Channels",
    "description": "Implement audio settings to control music and sound effects volume at launch.",
    "status": "pending",
    "priority": "P3",
    "layer": "adapter",
    "adr_refs": [
      "ADR-0006",
      "ADR-0008",
      "ADR-0011"
    ],
    "chapter_refs": [
      "CH05",
      "CH10",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "adapter"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #29 behavior matches PRD lock for Add Audio Settings for Music and SFX Channels.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "Separate music and SFX channel volume values are maintained, and changing one channel setting does not alter the other channel value.",
      "When a music or SFX volume setting is changed at runtime, the corresponding channel loudness changes immediately in the same session without restart.",
      "Changed music and SFX volume settings are saved to configuration and are restored and applied on the next game launch.",
      "With both channels active, music and SFX playback remain independently controllable so each channel can be adjusted without cross-channel side effects.",
      "Repeated runtime volume adjustments do not produce runtime errors and audio playback continues normally.",
      "On launch after a previous save, the first audible output for each channel reflects its restored setting without requiring any user interaction in that session.",
      "If only one channel setting is changed and saved, relaunching preserves the unchanged channel at its prior value while applying only the modified channel value."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #29 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 29,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0030",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0021",
      "NG-0022",
      "NG-0023",
      "NG-0024",
      "NG-0025",
      "NG-0026",
      "NG-0027",
      "NG-0028",
      "NG-0029"
    ],
    "taskmaster_exported": false,
    "title": "Optimize for Performance Targets (45 FPS 1% Low, 60 FPS Average)",
    "description": "Implement optimizations to meet non-functional goals: low-end baseline 45 FPS (1% low) and average 60 FPS target.",
    "status": "pending",
    "priority": "P1",
    "layer": "adapter",
    "adr_refs": [
      "ADR-0015",
      "ADR-0005",
      "ADR-0011"
    ],
    "chapter_refs": [
      "CH09",
      "CH07",
      "CH10"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "adapter"
    ],
    "test_refs": [
      "Game.Core.Tests/State/GameStateMachineTests.cs"
    ],
    "acceptance": [
      "Taskmaster #30 behavior matches PRD lock for Optimize for Performance Targets (45 FPS 1% Low, 60 FPS Average).",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "Deterministic baseline profiles are captured using locked camera paths and scripted sessions, and two repeated runs stay within the predefined variance window.",
      "A profiling report identifies and ranks frame-time hotspots by subsystem (AI, spawn, render, UI) with repeatable timing data per offender.",
      "Targeted optimizations to update loops, pooling, and expensive queries deliver measurable frame-time improvement versus baseline while regression tests confirm gameplay semantics are unchanged.",
      "Stress and endurance runs at launch presets cover worst-case wave mixes and UI-heavy scenarios, and the report records memory growth and stutter spikes with pass/fail thresholds or explicit failure reasons plus traces.",
      "Standardized gate artifacts are written to logs/perf and logs/ci for Windows headless/playable fixed-seed runs, with integer threshold fields and verdicts for baseline, 1% low FPS, and average FPS.",
      "Task completion is PASS only when reproducible Windows fixed-seed headless/playable runs meet at least 45 FPS for 1% low and 60 FPS for average FPS in the gate summary.",
      "If runs fail to show measurable improvement versus baseline within the declared variance window, or required gate artifacts/fields are missing, the task verdict is FAIL and must not be accepted.",
      "Gate evidence includes paired baseline and post-optimization metrics for the same fixed-seed scenes so 1% low and average FPS deltas are directly verifiable.",
      "Acceptance is blocked when any required phase evidence (baseline capture, hotspot isolation, frame-budget remediation, stress validation, gate artifact output) is missing from logs/perf or logs/ci."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #30 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 30,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0031",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [],
    "taskmaster_exported": false,
    "title": "Set up Godot 4.5.1 C# project structure for config contracts",
    "description": "Initialize a Godot 4.5.1 C# project on Windows with a dedicated folder structure for config schemas and samples, ensuring compatibility with Steam single-player and Windows-only constraints.",
    "status": "pending",
    "priority": "P1",
    "layer": "ci",
    "adr_refs": [
      "ADR-0011",
      "ADR-0001"
    ],
    "chapter_refs": [
      "CH07",
      "CH10",
      "CH01"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "ci"
    ],
    "test_refs": [
      "Game.Core.Tests/Domain/GameConfigTests.cs"
    ],
    "acceptance": [
      "Taskmaster #31 behavior matches PRD lock for Set up Godot 4.5.1 C# project structure for config contracts.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "The project opens successfully in Godot 4.5.1 on Windows, and C# project generation/build completes without compile errors.",
      "Both directories `config/schemas/` and `config/samples/` exist in the project structure after setup.",
      "Export configuration includes a Windows Desktop target and does not enable non-Windows export targets.",
      "Project settings are configured for single-player operation, with networking/multiplayer features disabled so gameplay does not depend on online connectivity.",
      "A `README.md` file exists and documents the config-first approach, including the purpose of `config/schemas/` and `config/samples/`.",
      "The project is initialized with C# scripting enabled (not GDScript-only), and Godot 4.5.1 on Windows generates/uses C# project files that compile successfully.",
      "Acceptance fails if startup or core single-player flow requires network connectivity or multiplayer services to be available."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #31 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 31,
    "contractRefs": [
      "Game.Core/Contracts/DomainEvent.cs"
    ]
  },
  {
    "id": "NG-0032",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0031"
    ],
    "taskmaster_exported": false,
    "title": "Implement enemy-config.schema.json with validation rules",
    "description": "Define JSON schema for enemy configuration, including fields for enemy types, stats, and behaviors, adhering to config-first balancing and no hardcoded values.",
    "status": "pending",
    "priority": "P1",
    "layer": "core",
    "adr_refs": [
      "ADR-0023",
      "ADR-0007",
      "ADR-0005"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/Domain/GameConfigTests.cs"
    ],
    "acceptance": [
      "Taskmaster #32 behavior matches PRD lock for Implement enemy-config.schema.json with validation rules.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "config/schemas/enemy-config.schema.json exists and declares \"$schema\": \"http://json-schema.org/draft-07/schema#\" with top-level \"type\": \"object\".",
      "The schema defines an \"enemies\" property as an array, and each array item is an object schema for a single enemy configuration.",
      "Each enemy item schema includes at least enemy_id (string), health (number, minimum 1), damage (number, minimum 0), and speed (number, minimum 0), and these fields are listed in required.",
      "The schema includes configurable enemy type/identity and behavior-related fields with explicit type constraints, so behavior selection is data-driven by config.",
      "Validator-based tests on Windows C# reject payloads with missing required fields, wrong field types, or numeric values below declared minima.",
      "Validator-based tests on Windows C# accept at least one valid payload where all required fields and numeric constraints are satisfied.",
      "Enemy balance values are sourced from schema-validated configuration data; adding or adjusting enemy balance values does not require hardcoded per-enemy constants for schema compliance.",
      "The root schema lists \"enemies\" in required, and validator-based tests reject a top-level payload that omits \"enemies\".",
      "Validator-based tests reject enemy objects where behavior-related fields are present but use types that differ from the schema declaration.",
      "Validator-based tests accept a payload containing at least two enemy entries with different valid health/damage/speed values without requiring schema or code changes."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #32 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 32,
    "contractRefs": [
      "Game.Core/Contracts/Config/enemy-config.schema.json"
    ]
  },
  {
    "id": "NG-0033",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0031"
    ],
    "taskmaster_exported": false,
    "title": "Implement difficulty-config.schema.json with versioning and lock constraints",
    "description": "Create JSON schema for difficulty configuration, including version field, difficulty levels, and constants, ensuring difficulty is locked at run start per PRD.",
    "status": "pending",
    "priority": "P2",
    "layer": "core",
    "adr_refs": [
      "ADR-0023",
      "ADR-0007",
      "ADR-0005"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/Domain/GameConfigTests.cs"
    ],
    "acceptance": [
      "Taskmaster #33 behavior matches PRD lock for Implement difficulty-config.schema.json with versioning and lock constraints.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "A file exists at `config/schemas/difficulty-config.schema.json` and parses as valid JSON.",
      "The schema requires both `version` and `difficulty_level`, and validation rejects inputs where `version` is missing.",
      "`version` is validated as a string matching `^\\d+\\.\\d+$`; examples like `1.0` pass while `v1` or `1` fail.",
      "`difficulty_level` is validated as a string enum with only `easy`, `medium`, and `hard`; any other value is rejected.",
      "`modifiers` is defined as an object and its declared modifier fields are numeric; non-numeric modifier values are rejected.",
      "Per PRD lock constraint, once a run starts, attempts to change active difficulty are refused or leave active difficulty unchanged.",
      "Schema validation tests include positive and negative samples covering invalid enum, missing `version`, and invalid `version` pattern with expected pass/fail outcomes.",
      "The schema declares `version` as an explicit top-level property and includes it in `required`, so configuration revision is always present for backward-trackability checks.",
      "Validation accepts at least two configurations that differ only in declared numeric `modifiers` values, confirming these values are configurable data and not fixed constants.",
      "A lock-behavior test verifies difficulty changes can take effect before run start, while after run start a change attempt is refused or leaves active difficulty unchanged."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #33 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 33,
    "contractRefs": [
      "Game.Core/Contracts/Config/difficulty-config.schema.json"
    ]
  },
  {
    "id": "NG-0034",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0031"
    ],
    "taskmaster_exported": false,
    "title": "Implement spawn-config.schema.json for deterministic wave composition",
    "description": "Define JSON schema for spawn configuration to control enemy waves, ensuring determinism: same seed + same config => same wave timeline.",
    "status": "pending",
    "priority": "P2",
    "layer": "core",
    "adr_refs": [
      "ADR-0023",
      "ADR-0007",
      "ADR-0005"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/Domain/GameConfigTests.cs"
    ],
    "acceptance": [
      "Taskmaster #34 behavior matches PRD lock for Implement spawn-config.schema.json for deterministic wave composition.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "config/schemas/spawn-config.schema.json exists and validates a spawn config object with seed (integer) and waves (array) fields.",
      "Each wave object validation enforces day as an integer in [1, 15] and includes day/night timing values aligned to a 4-minute Day + 2-minute Night cycle.",
      "Enemy entries in each wave validate enemy_id as string and count as integer with minimum 0; negative counts or wrong types fail validation.",
      "Validation test data includes at least one valid config and failing cases for day outside 1-15 and negative enemy count, and failures are observable in test results.",
      "Determinism test demonstrates that repeated wave generation with the same seed and the same valid config yields the same wave timeline, while invalid config is rejected with no timeline output.",
      "Wave timeline generation inputs are restricted to schema-valid config values plus seed, with no hidden runtime override required to reproduce results.",
      "Schema/timeline verification demonstrates that the configured 4-minute Day + 2-minute Night cadence over Day1-Day15 produces a timeline within the required 60-90 minute match window (90 minutes at full 15-day coverage) using config values only."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #34 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 34,
    "contractRefs": [
      "Game.Core/Contracts/Config/spawn-config.schema.json"
    ]
  },
  {
    "id": "NG-0035",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0031"
    ],
    "taskmaster_exported": false,
    "title": "Implement pressure-normalization.config.schema.json with baseline constants and range checks",
    "description": "Create JSON schema for pressure normalization configuration, including explicit baseline constants and validation for ranges as per PRD.",
    "status": "pending",
    "priority": "P2",
    "layer": "core",
    "adr_refs": [
      "ADR-0023",
      "ADR-0007",
      "ADR-0005"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/Domain/GameConfigTests.cs"
    ],
    "acceptance": [
      "Taskmaster #35 behavior matches PRD lock for Implement pressure-normalization.config.schema.json with baseline constants and range checks.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "config/schemas/pressure-normalization.config.schema.json exists and is parseable as JSON Schema.",
      "Schema defines baseline, min_pressure, and max_pressure as number-typed fields, and normalization_factors as an array whose items are number-typed.",
      "Schema rejects configurations that omit baseline, min_pressure, max_pressure, or normalization_factors.",
      "Schema encodes explicit baseline and pressure-bound constants (including a baseline lower bound) instead of relying on implicit defaults.",
      "Schema validation rejects configurations where min_pressure is greater than or equal to max_pressure.",
      "Schema validation rejects non-numeric baseline values and accepts numeric baseline values that satisfy declared bounds.",
      "Schema validation accepts a configuration with numeric baseline, min_pressure < max_pressure, and normalization_factors containing only numbers.",
      "Schema validation rejects a configuration where normalization_factors contains any non-numeric element.",
      "If a constraints object is present, constraints.range_check is boolean-typed and schema validation rejects non-boolean values.",
      "Schema validation rejects a configuration where baseline violates the declared lower-bound constant."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #35 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 35,
    "contractRefs": [
      "Game.Core/Contracts/Config/pressure-normalization.config.schema.json"
    ]
  },
  {
    "id": "NG-0036",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0032",
      "NG-0033",
      "NG-0034",
      "NG-0035"
    ],
    "taskmaster_exported": false,
    "title": "Create sample JSON files for all configs with valid data",
    "description": "Generate sample JSON files (difficulty-config.sample.json, spawn-config.sample.json, pressure-normalization.config.sample.json) that adhere to the schemas and include realistic values.",
    "status": "pending",
    "priority": "P2",
    "layer": "core",
    "adr_refs": [
      "ADR-0023",
      "ADR-0007",
      "ADR-0005"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/Domain/GameConfigTests.cs"
    ],
    "acceptance": [
      "Taskmaster #36 behavior matches PRD lock for Create sample JSON files for all configs with valid data.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "difficulty-config.sample.json is present as a release sample artifact, passes schema and semantic validation, and includes version metadata, deterministic launch-tier defaults, and lock-at-start fields.",
      "spawn-config.sample.json is present as a release sample artifact, passes schema and semantic validation, and includes Day1-Day15 cadence coverage plus channel isolation flags required by the runtime parser.",
      "pressure-normalization.config.sample.json is present as a release sample artifact, passes schema and semantic validation, and declares explicit baseline constants with all tuning values inside guard bands.",
      "Negative fixtures include malformed and boundary-breach samples for these config domains, each negative case fails validation with explicit reason codes, and positive samples remain passing.",
      "A CI-consumable validation summary artifact is generated with schema and semantic validation outcomes for all positive and negative fixtures, and acceptance fails if this artifact is missing.",
      "Acceptance fails if any required positive sample file is missing, empty, or excluded from the validation run output.",
      "Validation output must contain explicit schema and semantic pass/fail results for each positive sample file; missing per-file results fail acceptance.",
      "For each config domain, at least one malformed fixture and one boundary-breach fixture are executed and rejected with non-empty explicit reason codes in the same run where all positive samples pass."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #36 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 36,
    "contractRefs": [
      "Game.Core/Contracts/Config/difficulty-config.sample.json",
      "Game.Core/Contracts/Config/spawn-config.sample.json",
      "Game.Core/Contracts/Config/pressure-normalization.config.sample.json"
    ]
  },
  {
    "id": "NG-0037",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0032",
      "NG-0033",
      "NG-0034",
      "NG-0035"
    ],
    "taskmaster_exported": false,
    "title": "Implement config validation and fallback handling in C#",
    "description": "Develop C# code in Godot to load and validate config files against schemas, applying invalid config handling policy: reject and fallback to built-in safe defaults.",
    "status": "pending",
    "priority": "P2",
    "layer": "core",
    "adr_refs": [
      "ADR-0023",
      "ADR-0007",
      "ADR-0005"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/Domain/GameConfigTests.cs"
    ],
    "acceptance": [
      "Taskmaster #37 behavior matches PRD lock for Implement config validation and fallback handling in C#.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "Schema-invalid config payloads are rejected by structural validation with deterministic normalized error codes and error payload fields.",
      "Semantic rule violations are validated and each violation maps to an explicit policy action with a testable reason key.",
      "Runtime config application enforces immutable and difficulty-locked fields: allowed fields fallback to built-in safe defaults, and forbidden changes are rejected without mutating protected runtime state.",
      "Validation decisions emit standardized audit entries and CI summary artifacts in logs/ci, including policy decision trace and rejection/fallback reasons.",
      "A valid/invalid/boundary config matrix demonstrates policy-consistent accept, reject, or fallback outcomes with observable logs.",
      "On any rejection path, runtime state remains unchanged for protected fields and no partial config mutation is observable after the decision.",
      "Reject and fallback outcomes expose explicit machine-verifiable reason identifiers in both test assertions and emitted audit records."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #37 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 37,
    "contractRefs": [
      "Game.Core/Contracts/Config/spawn-config.validator.rules.md"
    ]
  },
  {
    "id": "NG-0038",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0037"
    ],
    "taskmaster_exported": false,
    "title": "Integrate config governance for gameplay tuning",
    "description": "Connect config values to gameplay systems (e.g., enemy stats, wave spawning) to ensure all tuning is via config only, with no implementation hardcoding.",
    "status": "pending",
    "priority": "P2",
    "layer": "core",
    "adr_refs": [
      "ADR-0023",
      "ADR-0007",
      "ADR-0005"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/Domain/GameConfigTests.cs"
    ],
    "acceptance": [
      "Taskmaster #38 behavior matches PRD lock for Integrate config governance for gameplay tuning.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "Changing only enemy-config values updates corresponding enemy runtime stats (including health) in gameplay without modifying code; unchanged stats after a config-only change fails acceptance.",
      "Changing only spawn-config timing values updates wave spawn timing in gameplay without modifying code; unchanged timing after a config-only change fails acceptance.",
      "Wave generation uses spawn-config seed such that repeated runs with the same seed produce identical wave composition/order, and changing the seed changes composition/order.",
      "When valid config values are present, gameplay systems do not override enemy stats or wave-spawn parameters with hardcoded constants.",
      "Integration scenarios with at least two distinct config sets demonstrate that enemy stats and wave composition outputs follow config differences while remaining deterministic under a fixed seed.",
      "Using the same executable and content, tuning outcomes are achieved by config-only changes: updating enemy-config or spawn-config changes gameplay outputs without editing C# scripts; requiring script changes fails acceptance.",
      "For a chosen enemyId and spawn profile, observed runtime enemy health and spawn interval values exactly equal the active config values in that run; any value mismatch fails acceptance."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #38 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 38,
    "contractRefs": [
      "Game.Core/Contracts/Config/config-change-audit.schema.json"
    ]
  },
  {
    "id": "NG-0039",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0037"
    ],
    "taskmaster_exported": false,
    "title": "Add config hash/version to battle report metadata for auditability",
    "description": "Implement functionality to compute and include config hash or version in battle report metadata, as required for auditability.",
    "status": "pending",
    "priority": "P3",
    "layer": "core",
    "adr_refs": [
      "ADR-0023",
      "ADR-0007",
      "ADR-0005"
    ],
    "chapter_refs": [
      "CH05",
      "CH06",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/Domain/GameConfigTests.cs"
    ],
    "acceptance": [
      "Taskmaster #39 behavior matches PRD lock for Add config hash/version to battle report metadata for auditability.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "Each generated battle report includes metadata key \"config_hash\" or \"config_version\" with a non-empty value tied to the exact config used for that battle.",
      "Using the same config content/version across repeated runs produces the same metadata value in battle reports.",
      "Changing config content or its declared version before report generation produces a different metadata value in the next battle report.",
      "A battle report missing both \"config_hash\" and \"config_version\" is treated as invalid output and is not accepted as audit-complete.",
      "Battle report outputs preserve match-result content and include the chosen config metadata field (\"config_hash\" or \"config_version\") in the same persisted report payload for audit retrieval."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #39 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 39,
    "contractRefs": [
      "Game.Core/Contracts/Config/config-change-audit.schema.json"
    ]
  },
  {
    "id": "NG-0040",
    "story_id": "BACKLOG-LASTKING-M1",
    "owner": "architecture",
    "depends_on": [
      "NG-0037"
    ],
    "taskmaster_exported": false,
    "title": "Implement version migration rule with force migration",
    "description": "Develop version handling to force migration when config version changes, without dual-version compatibility, per PRD.",
    "status": "pending",
    "priority": "P2",
    "layer": "core",
    "adr_refs": [
      "ADR-0006",
      "ADR-0008",
      "ADR-0011"
    ],
    "chapter_refs": [
      "CH05",
      "CH10",
      "CH07"
    ],
    "overlay_refs": [
      "docs/architecture/overlays/PRD-lastking-T2/08/_index.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Feature-Slice-T2-Core-Loop.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Contracts-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Testing-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/08-Observability-T2.md",
      "docs/architecture/overlays/PRD-lastking-T2/08/ACCEPTANCE_CHECKLIST.md"
    ],
    "labels": [
      "backlog",
      "lastking",
      "taskmaster-view",
      "core"
    ],
    "test_refs": [
      "Game.Core.Tests/Domain/GameConfigTests.cs"
    ],
    "acceptance": [
      "Taskmaster #40 behavior matches PRD lock for Implement version migration rule with force migration.",
      "Referenced automated tests pass on Windows Godot+C# baseline.",
      "No regression on deterministic simulation and core loop constraints.",
      "When a loaded config version differs from the expected version, the loaded config is rejected and runtime configuration falls back to default values.",
      "On version mismatch, an error log entry is emitted that explicitly indicates migration is required.",
      "No dual-version compatibility path is active: mismatched-version configs are never partially accepted or auto-adapted.",
      "Automated unit tests cover both matching and mismatching config versions, and verify fallback occurs only for mismatches.",
      "When a loaded config version equals the expected version, the loaded config is accepted and runtime configuration does not fall back to default values.",
      "Unit tests explicitly assert both paths: matching version keeps loaded config, mismatching version rejects loaded config and triggers default fallback with migration-required logging."
    ],
    "test_strategy": [
      "Red: add or update test coverage around Taskmaster #40 primary behavior.",
      "Green: implement minimal deterministic logic to satisfy assertions.",
      "Refactor: preserve passing tests and tighten contract boundaries."
    ],
    "taskmaster_id": 40,
    "contractRefs": [
      "Game.Core/Contracts/Config/difficulty-config.schema.json"
    ]
  }
]
