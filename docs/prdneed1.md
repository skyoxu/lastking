## 先直说两个潜在坑，避免 game design 富化时把口径带偏：

  - 你历史输入里有冲突项（例如存档槽规则、天数表述），如果不强制“锁定项优先”，代理会自行补脑。
  - 敌军预算和奖励池如果不要求“可计算表格+状态机”，最后容易变成文案正确但实现不可落地。

  ## 输入资料（必须先读取）
  1) docs/prd/PRD-LASTKING-v1.1-SKELETON.md
  2) docs/adr/ADR-0031-path-blocking-nearest-blocker-fallback.md
  3) docs/adr/ADR-0032-independent-wave-budget-channels.md
  4) docs/adr/ADR-0033-reward-pool-exhaustion-gold-fallback.md
  5) AGENTS.md（仓库根）

  ## 输出目标
  生成：docs/prd/PRD-LASTKING-v1.2-GAMEDESIGN.md

  ## 硬约束（不得改写，只能细化）
  - 平台：Steam 单机，Windows only，Godot 4.5.1 + C#
  - 核心玩法：高压塔防 + 经营建设 + 募兵防守中部城堡
  - 昼夜：白天4分钟、夜晚2分钟
  - 敌军预算：Normal day1=50，按120%日复利增长；Elite/Boss独立预算通道（不并入普通预算权重）
  - Boss夜：默认2只Boss，不随难度提升
  - 路径规则：允许完全堵路；寻路失败时敌军优先攻击最近阻挡建筑（ADR-0031）
  - 奖励：每晚结算触发1次3选1；Normal/Elite/Boss独立奖励池；非金币奖励本局永久、不可重复、不可叠加；池耗尽后金币兜底
  - 无友伤：我方攻击对我方单位和建筑无友伤
  - 控制：自动作战为主，可设集结点，不可微操，技能自动释放
  - 地图：固定高度，约3屏横向滚动；支持边缘滚屏+键盘滚屏；1张随机模板
  - 架构口径：不得违反已Accepted ADR

  ## 必须产出的章节（按顺序）
  1. 设计愿景与玩家体验目标（中核可上手，低难不劝退，可上探硬核）
  2. 单局流程（从Day1到终局，分钟级时间线）
  3. 战斗与波次系统（Normal/Elite/Boss通道、夜型规则、精英夜/首领夜）
  4. 数值平衡首版表（Day1~Day15）
     - 每日预算、预计刷怪数、怪物构成建议、压力曲线说明
  5. 经济系统与建设系统
     - 资源循环、建筑清单、占地、升级上限与成本/时间
  6. 军事系统
     - 基础兵种与2个高级兵种定义（“新兵种”，不是升级形态）
  7. 科技系统（仅数值向）
     - 攻速/伤害/生产速度/射程/HP/建造成本
     - 百分比项必须有上限；数值项可无上限
  8. 奖励系统状态机
     - catalog_available / exhausted / gold_fallback
     - 明确“不可重复不可叠加”与“金币兜底可重复”
  9. Boss机制细化
     - 20秒无敌5秒
     - 20秒召唤2分身，分身50%攻击与HP，永久持续，上限10，可被减速
  10. UI/交互规范
      - 主HUD、建造交互、镜头反馈、信息层级
  11. 存档与成就
      - 云存档策略、自动存档触发点、成就20项（名称+条件+触发时机）
  12. 测试与验收映射
      - 给出 Test-Refs 草案（Core/Scenes/Security/Perf）

  ## 输出质量要求
  - 每个系统必须有“规则 + 数值 + 边界条件 + 失败处理”
  - 必须包含至少3张表：
    1) 波次与预算表
    2) 建筑与兵种成长表
    3) 科技与奖励池表
  - 若发现输入冲突，新增“Conflict Log”小节：
    - 列出冲突
    - 给出建议解法（不擅自改硬约束）
    - 标注需我确认的项（最多5条）

  ## 风格要求
  - 中文撰写，术语一致，避免空泛描述
  - 面向可实现与可测试，不写叙事废话
  - 不新增与项目约束冲突的平台/联机/移动端内容

