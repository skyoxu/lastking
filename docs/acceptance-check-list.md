# /acceptance-check ?????????????

??????? `scripts/sc/acceptance_check.py` ?????????????????????????

- ??????????????????????????????????? 具体项目/具体任务??
- ??????????`scripts/sc/acceptance_check.py`?

## 1. ????

### 1.1 Taskmaster ???

`acceptance_check.py` ??????????? `.taskmaster/tasks/tasks.json` ???

- ???????? `status == "in-progress"` ???
- ??????? `--task-id <id>`??? `10` / `10.3`??????? master id `10`?

### 1.2 ???????

- .NET 8 SDK?`dotnet`?
- Godot .NET?mono?
  - ?? `--godot-bin <path>` ????? `GODOT_BIN` ??

## 2. ?????Windows?

```powershell
# ??????????? --godot-bin?
py -3 scripts/sc/acceptance_check.py --task-id 10 --godot-bin "$env:GODOT_BIN"

# ?????????????adr,links,overlay,contracts,arch,build,security,tests,perf
py -3 scripts/sc/acceptance_check.py --task-id 10 --only adr,contracts,arch

# ???????????
py -3 scripts/sc/acceptance_check.py --task-id 10 --godot-bin "$env:GODOT_BIN" --perf-p95-ms 20
```

## 3. ???

- `0`????????
- `1`??????????
- `2`?????/????????????? Taskmaster ????

## 4. ?????SSoT?

??????????`logs/ci/<YYYY-MM-DD>/sc-acceptance-check/`

?????

- `summary.json`???????????
- `report.md`??????????
- `<step>.log`??? `run_and_capture` ???????
- ????????? JSON??? `architecture-boundary.json`?`security-soft-scan.json`?

## 5. ???????????

> ???????/?????????????CI ??????? workflow ???????????????

### 5.1 adr-compliance?????

????

- ???????`adrRefs` / `archRefs` ????
- ADR ?????`docs/adr/<ADR-ID>-*.md`?????
- ???? 1 ? `Status: Accepted` ? ADR
- ????? `overlay` ??????????

### 5.2 task-links-validate?????

- ???`py -3 scripts/python/task_links_validate.py`
- ???`.taskmaster/tasks/tasks_back.json`?`.taskmaster/tasks/tasks_gameplay.json`

???????/????????? Taskmaster ??????? CI ?????????Windows Quality Gate ????????

### 5.3 validate-task-overlays?????

- ???`py -3 scripts/python/validate_task_overlays.py`
- ??????? `overlay` ??? overlay ?????????

### 5.4 validate-contracts?????

- ???`py -3 scripts/python/validate_contracts.py`
- ????? overlay ??? `Game.Core/Contracts/**/*.cs` ???????

### 5.5 architecture-boundary?????

- ???`py -3 scripts/python/check_architecture_boundary.py --out <json>`
- ???`Game.Core/**` ???? `Godot.*`??????????????

### 5.6 dotnet-build-warnaserror?????

- ???`py -3 scripts/sc/build.py GodotGame.csproj --type dev`
- ??????????`-warnaserror`?

### 5.7 security-soft?????????

?????????????????????????????? `security-soft.json`?

????

- `check-sentry-secrets`?`py -3 scripts/python/check_sentry_secrets.py`
  - ?????? `exit 0`
- `check-domain-contracts`?domain contracts ????????????
  - ?????`scripts/python/check_domain_contracts.py`
  - ??????????? `SC_DOMAIN_CONTRACTS_CHECK` ??????????????????????
- `security-soft-scan`?`py -3 scripts/python/security_soft_scan.py --out <json>`
- `check-encoding-since-today`?`py -3 scripts/python/check_encoding.py --since-today`

### 5.8 tests-all?????

- ???`py -3 scripts/sc/test.py --type all --godot-bin <path>`
- ???xUnit?????+ GdUnit4/Smoke?????

### 5.9 perf-budget???????

???????????/CI ???????????

- ???`--perf-p95-ms <ms>`
- ??????`PERF_P95_THRESHOLD_MS=<ms>`

???????????? `logs/ci/**/headless.log` ?? `[PERF] ... p95_ms=...` ?????????

## 6. ??????????????

- ??????/?????? `.taskmaster/tasks/tasks.json`???? CI ??? acceptance-check???? Windows Quality Gate ????????
- ?????? acceptance-check????? `.taskmaster/tasks/tasks.json`??????? `status == "in-progress"` ?????????? workflow ??? `task_id`?

## 7. ????

- ???????????????????????? PRD-ID/???/?????????
- ????????????????? domain contracts ???????? `SC_DOMAIN_CONTRACTS_CHECK` ???
